<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<title>×˜×™×™××¨ ×‘×“×™×§×” ×œ××™×™×¤×•×Ÿ</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 40px;
        background: #f2f2f2;
    }
    #timeDisplay {
        font-size: 48px;
        margin: 20px 0;
    }
    button {
        padding: 10px 20px;
        font-size: 20px;
        margin: 8px;
        border-radius: 10px;
        cursor: pointer;
    }
</style>
</head>
<body>

<h2>×˜×™×™××¨ ×‘×“×™×§×” â€” iPhone Ready</h2>

<div>
    <button onclick="setTimer(10)">10 ×©× ×™×•×ª</button>
    <button onclick="setTimer(20)">20 ×©× ×™×•×ª</button>
    <button onclick="setTimer(30)">30 ×©× ×™×•×ª</button>
</div>

<div id="timeDisplay">00:00</div>

<button onclick="startTimer()">â–¶ï¸ ×”×ª×—×œ</button>
<button onclick="pauseTimer()">â¸ ×”×©×”×”</button>
<button onclick="resetTimer()">ğŸ” ××¤×¡</button>

<script>
/* ========= iPhone Audio Unlock ========= */
let audioCtx = null;

function initAudio() {
    if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        audioCtx.resume();
        console.log("AudioContext unlocked");
    }
}

/* ========= ×¦×œ×™×œ ×¡×™×•× ========= */
let dingAudio = new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");

function playEndSound() {
    dingAudio.currentTime = 0;
    dingAudio.play().catch(err => console.log("Audio blocked:", err));
}

/* ========= ×˜×™×™××¨ ========= */
let timerSeconds = 0;
let remaining = 0;
let interval = null;

function setTimer(sec) {
    timerSeconds = sec;
    remaining = sec;
    updateDisplay();
}

function updateDisplay() {
    let m = String(Math.floor(remaining / 60)).padStart(2, "0");
    let s = String(remaining % 60).padStart(2, "0");
    document.getElementById("timeDisplay").textContent = `${m}:${s}`;
}

function startTimer() {
    initAudio(); // ×—×•×‘×” ×‘××™×™×¤×•×Ÿ

    if (interval) return;
    if (remaining <= 0) remaining = timerSeconds;

    interval = setInterval(() => {
        remaining--;
        updateDisplay();

        if (remaining <= 0) {
            clearInterval(interval);
            interval = null;
            playEndSound();
        }
    }, 1000);
}

function pauseTimer() {
    clearInterval(interval);
    interval = null;
}

function resetTimer() {
    clearInterval(interval);
    interval = null;
    remaining = timerSeconds;
    updateDisplay();
}
</script>

</body>
</html>
